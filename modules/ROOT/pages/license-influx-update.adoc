= Configure Backup and Restore for Anypoint Private Cloud
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

== Update the InfluxDB License

When the InfluxDB license is updated, add it to the secret in the default namespace, then ensure it is running in the pods.

. Encode the new key, replacing `new-license-uuid-key` with the key:
+
----
echo -n "new-license-uuid-key" | base64
----
+
. Edit the secret:
+
----
kubectl edit secret/influxdb-license
----
+
. Update the config map, since the license is only added to the helm chart or configmap on deploy:
+
----
kubectl edit configmap/dias-prov-k8s-am-influxdb-comp-data -n dias
----
+
. Find the old key in influxdb.com, probably on line 29:
+
----
\ license-key = \"old-license-uuid-key\"
----
+
Where this example shows `old-license-uuid-key`, the file will show the key.
+
. Replace the old key with the new key.
. Restart the pods:
+
----
kubectl delete pod dias-prov-k8s-am-influxdb-comp-data-0 -n dias
kubectl delete pod dias-prov-k8s-am-influxdb-comp-data-1 -n dias
----
