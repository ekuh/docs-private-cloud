= Supported Configurations for Anypoint Platform PCE

To ensure platform performance, stability, and high availability, Anypoint Platform Private Cloud Edition (Anypoint Platform PCE) supports two network configurations: 4-node and 7-node. To ensure high availability and performance, each node must run on its own server in both configurations. If you are using a virtual machine to host the nodes, you must ensure that each VM node is running on a separate physical server.

Both the 4-node and 7-node configurations have two separate components:

* Anypoint Platform Core
* Monitoring Center Add-On (optional)

== 4-Node Configuration

The 4-node configuration is the smallest configuration that Anypoint Platform PCE supports. This is the minimum number of nodes that can enable high-availability and failover. In this configuration, each node hosts the platform applications and services. You must configure a load balancer to use round-robin distribution of traffic among each of the four nodes.

image::configuration-4-node.png[4-node Configuration]

Three of the nodes host an instance of the database and object store. Hosting the database and object store enables persistence but requires larger minimum disk and memory requirements. Although three of the nodes contain a database, only one database is used as the master. Applications on each node write to this database only. The other two database instances are hot standby instances of the master database that take over as the master database in case of failure.

== 7-Node Configuration

In the 7-node configuration, four nodes are dedicated to hosting platform applications and services. The other three nodes host the database and object store instances. Although each node contains a database, only one of the database nodes is used as the master. Applications on each node write to this database only. The other two database instances are hot standby instances of the master database that take over as the master database in case of failure.

image::prereqs-priv-cloud-6-node.png[6-node Configuration]

You must configure a load balancer to use round-robin distribution of traffic among all of the nodes in your cluster.

== Supported Platform Components and Configuration

[WARNING]
====
The recommendations and limits provided in this topic are based on the following resources:

* A 4-node environment consisting of 4 nodes of 8 cores and 32GB RAM, or
* A 7-node environment consisting of 7 nodes of 8 cores and 32GB RAM.
====


=== Mule Runtime Server and Mule Applications

The following table shows the recommended and maximum number of Mule runtime servers and Mule applications that Anypoint Platform PCE supports:

[%header%autowidth.spread]
|===
| | 4-node Configuration | 7-node Configuration
| Maximum number of servers per environment | 500 | 500
| Maximum number of servers across all environments | 1500 | 3000
| Maximum number of servers per server group | 20 | 20
| Maximum servers per cluster | 8 | 8
| Mule applications under management per environment (recommended) | Under 200 | Around 200
| Mule applications under management per environment (maximum) | 500 | 500
| Mule runtime engines under management (maximum) | 500 single Mule runtime engines, or 250 Mule runtime clusters, consisting of 2 Mule runtime engines per cluster | 1000 single Mule runtime engines, or 500 Mule runtime clusters, consisting of 2 Mule runtime engines per cluster
| Mule applications per Mule runtime engine (recommended) | Fewer than 25 | Fewer than 25
| Mule applications per Mule runtime engine (maximum) | 100 | 50
|===


=== APIs

For both 4-node and 7-node configurations, the following apply there is a maximum of 5000 managed APIs where:

* A single API implementation with one policy counts as 0.5 APIs.
* A single clustered proxy with up to 5 policies counts as 1.
* All runtimes are polling every 60 seconds.

=== Access Managment

[%header%autowidth.spread]

|===
| | 4-node Configuration | 7-node Configuration
| Maximum number of supported business groups | 75 | N/A
| Maximum number of users | 10000 | N/A
|===


=== Exchange

[%header%autowidth.spread]
|===
| | 4-node Configuration | 7-node Configuration
| Maximum Exchange assets | 60,000 | 60,000
| Maximum file size when publishing asset through UI | 5 MB | 5 MB
| Maximum uncompressed file size | 50 MB | 
| Maximum file size when publishing asset through Maven | 200 MB | 200
| Maximum number of dependencies for a single asset | 100 | 100
| Maximum icon size | 2 MB | 2 MB
| Maximum number of resources (attachments) per asset portal | 100 | 100
| Maximum resource size for attachments to the asset portal | 2 MB | 2 MB
| Maximum indexable asset content for RAML or asset portal | 1 MB | 1 MB
| Maximum number of categories per organization | 500 | 500
| Maximum number of custom configurations per organization | 500 | 500
| Maximum number of pages in a portal | 50 | 50
| Maximum length of page name | 128 characters | 128 characters
| Maximum review title length | 300 characters | 300 characters
| Maximum review text length | 2048 characters | 2048 characters
|===

The 1 MB maximum indexable asset content for RAML or asset portal means that if your portal has more than 1MB in text, only the first 1MB will be indexed, and if your portal has more than 1 MB in RAML specifications, only the first 1 MB will be indexed.

=== API Designer and API Mocking Service

The following apply to both 4-node and 7-node configurations.

[%autowidth.spread]
|===
| Maximum number of projects | Limited by version control system
| Maximum number of concurrent users | 16
| Maximum number of mocking service instances | One per API version
| Maximum number of mocking service users | 16
|===

===  Anypoint Monitoring and Visualizer

Anypoint Platform PCE includes support for Anypoint Monitoring and Anypoint Visualizer with some exceptions.

====  Anypoint Monitoring

Anypoint Platform PCE does not the support the following Anypoint Monitoring features:

** Support for Mule 3.8.x
** Log management
+
As an alternative, use your server's logging capabilties or a third-party vendor like Splunk.
** Increased storage capacity
+
This capacity is not required because the Archive API is not supported.
** Archive API
+
This API is not applicable because log management is not supported.
** API Functional Monitoring
+
As an alternative, use a third-party vendor, such as Pingdom.
** The *Tools* option in the left-hand menu is not available.

==== Visualizer

Anypoint Platform PCE does not the support the following Anypoint Visualizer features:

* List of applications
+
If an application does not use Anypoint Monitoring, Anypoint Visualizer cannot track it on Anypoint Platform PCE.
* Policy visualization

== See Also

* xref:anypoint-monitoring-visualizer.adoc[Configure Anypoint Monitoring and Visualizer]
